# è€æ¿è¯„åˆ†å·¥ä½œæµç¨‹æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†è€æ¿(Boss)åœ¨OKRç»©æ•ˆè€ƒæ ¸ç³»ç»Ÿä¸­çš„**ç®€åŒ–è¯„åˆ†å·¥ä½œæµç¨‹**ï¼ŒåŒ…æ‹¬å¾…åŠæŸ¥çœ‹ã€è¯„åˆ†æ“ä½œå’Œç»“æœæŸ¥çœ‹çš„å®Œæ•´æµç¨‹ã€‚

**é‡è¦ç‰¹æ€§**ï¼š
- **ç®€åŒ–è¯„åˆ†æ¨¡å¼**ï¼šè€æ¿è¯„åˆ†é‡‡ç”¨ç®€åŒ–æ¨¡å¼ï¼Œåªéœ€æä¾›æ€»åˆ†å’Œè¯„è¯­ï¼Œæ— éœ€é€é¡¹è¯¦ç»†è¯„åˆ†
- **ä¸¤å±‚åŠ æƒæ”¯æŒ**ï¼šåœ¨ä¸¤å±‚åŠ æƒæ¨¡å¼ä¸‹ï¼Œè€æ¿å¯å¯¹ä»»ä½•å·²å®Œæˆè‡ªè¯„å’Œé¢†å¯¼è¯„åˆ†çš„å‘˜å·¥è¿›è¡Œæœ€ç»ˆè¯„åˆ†
- **å…¨å±€æŸ¥çœ‹æƒé™**ï¼šè€æ¿å¯ä»¥æŸ¥çœ‹ä»»ä½•å‘˜å·¥çš„è¯„åˆ†å¯¹æ¯”å’Œå®Œæ•´è¯„ä¼°è¯¦æƒ…

## å‰ææ¡ä»¶

- è€æ¿è´¦å·å·²ç™»å½•ç³»ç»Ÿ
- è€ƒæ ¸é…ç½®ä¸º**ä¸¤å±‚åŠ æƒæ¨¡å¼**ï¼ˆ`scoring_mode: "two_tier_weighted"`ï¼‰
- è€ƒæ ¸çŠ¶æ€ä¸º `active`ï¼ˆè¿›è¡Œä¸­ï¼‰
- å‘˜å·¥å·²å®Œæˆè‡ªè¯„ï¼Œé¢†å¯¼å·²å®Œæˆè¯„åˆ†

## å®Œæ•´å·¥ä½œæµç¨‹

### 1. æŸ¥çœ‹å¾…åŠä»»åŠ¡

**æ¥å£**: `GET /api/v1/evaluations/my-tasks`

**å‚æ•°**:
- `assessment_id` (å¯é€‰): æŒ‡å®šè€ƒæ ¸IDï¼Œä¸ä¼ åˆ™è¿”å›æ‰€æœ‰è€ƒæ ¸çš„ä»»åŠ¡

**è¿”å›æ•°æ®**:
```json
[
  {
    "id": "boss-17-7",
    "assessment_id": 17,
    "assessment_title": "2024å¹´ç¬¬4å­£åº¦ç»©æ•ˆè€ƒæ ¸",
    "assessment_period": "2024å¹´ç¬¬4å­£åº¦",
    "type": "boss",
    "evaluatee_id": 7,
    "evaluatee_name": "å¼ ä¸‰",
    "evaluatee_department": "æŠ€æœ¯éƒ¨",
    "status": "pending",
    "deadline": "2025-01-15T23:59:59.000Z",
    "is_overdue": false,
    "evaluation_id": null,
    "last_updated": null
  }
]
```

**ä»»åŠ¡çŠ¶æ€è¯´æ˜**:
- `pending`: å¾…å¼€å§‹
- `in_progress`: è¿›è¡Œä¸­ï¼ˆå·²ä¿å­˜è‰ç¨¿ï¼‰
- `completed`: å·²å®Œæˆ

### 2. è·å–ç‰¹å®šè€ƒæ ¸çš„ä¸‹å±è¯„åˆ†ä»»åŠ¡

**æ¥å£**: `GET /api/v1/evaluations/subordinates/{assessmentId}`

**å‚æ•°**:
- `assessmentId`: è€ƒæ ¸ID

**è¿”å›æ•°æ®**:
```json
[
  {
    "subordinate_id": 7,
    "subordinate_name": "å¼ ä¸‰",
    "subordinate_department": "æŠ€æœ¯éƒ¨",
    "status": "not_started",
    "self_evaluation_completed": true,
    "self_evaluation_completed_at": "2025-07-27T23:56:23.000Z",
    "leader_evaluation_id": 17,
    "leader_evaluation_completed_at": "2025-07-28T00:28:10.000Z",
    "last_updated": "2025-07-28T00:28:10.000Z"
  }
]
```

### 3. è·å–è¯„åˆ†æ¨¡æ¿ï¼ˆç®€åŒ–æ¨¡å¼ï¼‰

**æ¥å£**: `GET /api/v1/evaluations/template/{assessmentId}/user/{userId}`

**å‚æ•°**:
- `assessmentId`: è€ƒæ ¸ID
- `userId`: è¢«è¯„ä¼°äººID

**è¿”å›æ•°æ®ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "success", 
  "data": {
    "assessment_id": 17,
    "assessment_title": "2025å¹´05æœˆç»©æ•ˆè€ƒæ ¸",
    "version": "1.0",
    "scoring_method": "weighted",
    "total_score": 100,
    "scoring_rules": {
      "scoring_mode": "two_tier_weighted",
      "two_tier_config": {
        "boss_weight": 10,
        "employee_leader_weight": 90,
        "self_weight_in_employee_leader": 40,
        "leader_weight_in_employee_leader": 60
      },
      "calculation_method": "weighted_average"
    },
    "categories": [],
    "usage_instructions": {
      "for_leaders": [],
      "for_employees": []
    },
    "current_user_id": 2,
    "evaluation_type": "boss",
    "evaluatee_id": 7,
    "evaluatee_name": "å¼ ä¸‰",
    "current_status": "not_started",
    "is_boss_simplified": true,
    "boss_evaluation_note": "è€æ¿è¯„åˆ†é‡‡ç”¨ç®€åŒ–æ¨¡å¼ï¼Œåªéœ€æä¾›æ€»åˆ†å’Œç®€è¦è¯„è¯­å³å¯"
  }
}
```

**å…³é”®ç‰¹å¾**:
- `categories`: **ç©ºæ•°ç»„**ï¼Œè¡¨ç¤ºæ— éœ€è¯¦ç»†é¡¹ç›®è¯„åˆ†
- `is_boss_simplified`: **true**ï¼Œæ ‡è¯†ç®€åŒ–è¯„åˆ†æ¨¡å¼  
- `boss_evaluation_note`: æä¾›æ“ä½œè¯´æ˜
- `evaluation_type`: "boss"ï¼Œç¡®è®¤è¯„åˆ†ç±»å‹

### 4. æäº¤ç®€åŒ–è¯„åˆ†ï¼ˆæ¨èï¼‰

è€æ¿è¯„åˆ†é‡‡ç”¨**ç®€åŒ–æ¨¡å¼**ï¼Œåªéœ€æä¾›æ€»åˆ†å’Œè¯„è¯­ï¼Œæ— éœ€é€é¡¹è¯¦ç»†è¯„åˆ†ã€‚

**æ¥å£**: `POST /api/v1/evaluations/boss`

**è¯·æ±‚ä½“**:
```json
{
  "assessment_id": 17,
  "evaluatee_id": 7,
  "score": 88.5,
  "feedback": "æ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œåœ¨æŠ€æœ¯èƒ½åŠ›æ–¹é¢æœ‰æ˜¾è‘—æå‡ï¼Œå»ºè®®ç»§ç»­ä¿æŒå·¥ä½œç§¯ææ€§"
}
```

**å­—æ®µè¯´æ˜**:
- `assessment_id`: è€ƒæ ¸IDï¼ˆå¿…å¡«ï¼‰
- `evaluatee_id`: è¢«è¯„ä¼°äººIDï¼ˆå¿…å¡«ï¼‰ 
- `score`: æ€»åˆ†ï¼Œ0-100ä¹‹é—´ï¼ˆå¿…å¡«ï¼‰
- `feedback`: è¯„è¯­ï¼ˆå¯é€‰ä½†æ¨èå¡«å†™ï¼‰
- `strengths`: ä¼˜åŠ¿ï¼ˆå¯é€‰ï¼‰
- `improvements`: æ”¹è¿›å»ºè®®ï¼ˆå¯é€‰ï¼‰

**è¿”å›ç»“æœ**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 18,
    "assessment_id": 17,
    "evaluatee_id": 7,
    "evaluator_id": 2,
    "type": "boss",
    "score": "88.50",
    "feedback": "æ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œåœ¨æŠ€æœ¯èƒ½åŠ›æ–¹é¢æœ‰æ˜¾è‘—æå‡",
    "strengths": null,
    "improvements": null,
    "detailed_scores": null,
    "status": "submitted",
    "submitted_at": "2025-07-28T08:45:00.000Z"
  }
}
```

**æ³¨æ„äº‹é¡¹**:
- `detailed_scores` å§‹ç»ˆä¸º `null`ï¼Œç¬¦åˆç®€åŒ–è¯„åˆ†é€»è¾‘
- è¯„åˆ†æäº¤åå°†è§¦å‘æœ€ç»ˆåˆ†æ•°çš„ä¸¤å±‚åŠ æƒè®¡ç®—
- ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥å‘˜å·¥çš„è‡ªè¯„å’Œé¢†å¯¼è¯„åˆ†å®ŒæˆçŠ¶æ€

### 5. æŸ¥çœ‹è¯„åˆ†è¯¦æƒ…

**æ¥å£**: `GET /api/v1/evaluations/detailed/{evaluationId}`

**å‚æ•°**:
- `evaluationId`: è¯„ä¼°è®°å½•ID

### 6. æŸ¥çœ‹è¯„åˆ†å¯¹æ¯”ï¼ˆå…¨å±€æƒé™ï¼‰

**æ¥å£**: `GET /api/v1/evaluations/comparison/{assessmentId}/{userId}`

**å‚æ•°**:
- `assessmentId`: è€ƒæ ¸ID
- `userId`: è¢«è¯„ä¼°äººID

**æƒé™è¯´æ˜**:
- **è€æ¿å…·æœ‰å…¨å±€æŸ¥çœ‹æƒé™**ï¼šåœ¨ä¸¤å±‚åŠ æƒæ¨¡å¼ä¸‹ï¼Œè€æ¿å¯ä»¥æŸ¥çœ‹ä»»ä½•å‘˜å·¥çš„è¯„åˆ†å¯¹æ¯”
- å‘˜å·¥åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è¯„åˆ†å¯¹æ¯”
- é¢†å¯¼å¯ä»¥æŸ¥çœ‹ç›´å±ä¸‹å±çš„è¯„åˆ†å¯¹æ¯”

**è¿”å›æ•°æ®ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "assessment_id": 17,
    "user_id": 7,
    "self_evaluation": {
      "id": 16,
      "type": "self",
      "score": "98.36",
      "feedback": "å·¥ä½œè¡¨ç°è‰¯å¥½ï¼Œç§¯æå®Œæˆå„é¡¹ä»»åŠ¡",
      "detailed_scores_with_template": [
        {
          "categoryName": "å·¥ä½œç»©æ•ˆ",
          "categoryScore": 98.4,
          "items": [
            {
              "itemName": "å·¥ä½œé¥±å’Œåº¦",
              "score": 99,
              "comment": "å·¥ä½œé¥±å’Œåº¦è‰¯å¥½"
            }
          ]
        }
      ]
    },
    "leader_evaluation": {
      "id": 17,
      "type": "leader",  
      "score": "88.04",
      "feedback": "æ•´ä½“è¡¨ç°ç¬¦åˆé¢„æœŸ",
      "detailed_scores_with_template": [
        {
          "categoryName": "å·¥ä½œç»©æ•ˆ",
          "categoryScore": 88.0,
          "items": [
            {
              "itemName": "å·¥ä½œé¥±å’Œåº¦",
              "score": 80,
              "comment": "éœ€è¦æå‡å·¥ä½œé¥±å’Œåº¦"
            }
          ]
        }
      ]
    },
    "boss_evaluation": {
      "id": 18,
      "type": "boss",
      "score": "88.50",
      "feedback": "æ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œå·¥ä½œç§¯æä¸»åŠ¨",
      "strengths": null,
      "improvements": null,
      "detailed_scores_with_template": null
    },
    "evaluation_status": {
      "is_completed": true,
      "completion_status": "completed",
      "has_self_evaluation": true,
      "has_leader_evaluation": true,
      "has_boss_evaluation": true,
      "boss_enabled": true,
      "scoring_mode": "two_tier_weighted",
      "current_score": 91.8,
      "score_breakdown": {
        "self_score": 98.36,
        "leader_score": 88.04,
        "boss_score": 88.5,
        "weighted_self_score": 35.41,
        "weighted_leader_score": 47.54,
        "weighted_boss_score": 8.85
      },
      "weight_config": {
        "self_weight": 0.36,
        "leader_weight": 0.54,
        "boss_weight": 0.1,
        "boss_enabled": true
      }
    },
    "comparison_analysis": {
      "self_vs_leader": {
        "score_difference": 10.32,
        "self_higher": true,
        "agreement_level": "low"
      }
    }
  }
}
```

**å…³é”®ç‰¹å¾**:
- `boss_evaluation.detailed_scores_with_template`: **null**ï¼Œä½“ç°ç®€åŒ–è¯„åˆ†æ¨¡å¼
- `evaluation_status.scoring_mode`: "two_tier_weighted"ï¼Œç¡®è®¤ä¸¤å±‚åŠ æƒæ¨¡å¼
- `score_breakdown`: æ¸…æ™°æ˜¾ç¤ºå„è¯„åˆ†çš„æƒé‡è´¡çŒ®
- `current_score`: 91.8ï¼Œæœ€ç»ˆåŠ æƒåˆ†æ•°

### 7. æŸ¥çœ‹å®Œæ•´è¯„ä¼°è¯¦æƒ…

**æ¥å£**: `GET /api/v1/evaluations/assessment/{assessmentId}/user/{userId}/complete`

**æƒé™è¦æ±‚**: éœ€è¦ `leader`ã€`boss` æˆ– `admin` è§’è‰²

**æŸ¥è¯¢å‚æ•°**:
- `include_details`: æ˜¯å¦åŒ…å«è¯¦ç»†è¯„åˆ†é¡¹ï¼ˆé»˜è®¤trueï¼‰
- `include_comments`: æ˜¯å¦åŒ…å«è¯„è®ºå†…å®¹ï¼ˆé»˜è®¤trueï¼‰
- `include_comparison`: æ˜¯å¦åŒ…å«å¯¹æ¯”åˆ†æï¼ˆé»˜è®¤trueï¼‰

## è¯„åˆ†è®¡ç®—é€»è¾‘

### ä¸¤å±‚åŠ æƒæ¨¡å¼
å½“è€æ¿è¯„åˆ†å®Œæˆåï¼Œç³»ç»Ÿä¼šæ ¹æ®é…ç½®çš„æƒé‡è®¡ç®—æœ€ç»ˆå¾—åˆ†ï¼š

```
æœ€ç»ˆå¾—åˆ† = Bossè¯„åˆ† Ã— Bossæƒé‡ + (è‡ªè¯„å¾—åˆ† Ã— è‡ªè¯„æƒé‡ + é¢†å¯¼è¯„åˆ† Ã— é¢†å¯¼æƒé‡) Ã— å‘˜å·¥+é¢†å¯¼æƒé‡
```

**é»˜è®¤é…ç½®**:
- Bossæƒé‡: 10%
- å‘˜å·¥+é¢†å¯¼æƒé‡: 90%
  - è‡ªè¯„åœ¨å‘˜å·¥+é¢†å¯¼ä¸­çš„æƒé‡: 40%
  - é¢†å¯¼è¯„åˆ†åœ¨å‘˜å·¥+é¢†å¯¼ä¸­çš„æƒé‡: 60%

**å®é™…è®¡ç®—**:
- è‡ªè¯„æœ€ç»ˆæƒé‡: 40% Ã— 90% = 36%
- é¢†å¯¼è¯„åˆ†æœ€ç»ˆæƒé‡: 60% Ã— 90% = 54%
- Bossè¯„åˆ†æœ€ç»ˆæƒé‡: 10%

### ä¼ ç»Ÿæ¨¡å¼
å¦‚æœæœªå¯ç”¨Bossè¯„åˆ†ï¼Œåˆ™ä½¿ç”¨ä¼ ç»Ÿçš„ä¸¤é˜¶æ®µè¯„åˆ†ï¼š
```
æœ€ç»ˆå¾—åˆ† = è‡ªè¯„å¾—åˆ† Ã— è‡ªè¯„æƒé‡ + é¢†å¯¼è¯„åˆ† Ã— é¢†å¯¼æƒé‡
```

## å·¥ä½œæµç¨‹æ­¥éª¤æ€»ç»“

1. **ç™»å½•ç³»ç»Ÿ** â†’ è€æ¿è´¦å·ç™»å½•
2. **æŸ¥çœ‹å¾…åŠ** â†’ `GET /api/v1/evaluations/my-tasks`
3. **æŸ¥çœ‹ä¸‹å±åˆ—è¡¨** â†’ `GET /api/v1/evaluations/subordinates/{assessmentId}`
4. **è·å–ç®€åŒ–è¯„åˆ†æ¨¡æ¿** â†’ `GET /api/v1/evaluations/template/{assessmentId}/user/{userId}`
5. **æäº¤ç®€åŒ–è¯„åˆ†** â†’ `POST /api/v1/evaluations/boss`
6. **æŸ¥çœ‹ç»“æœå¯¹æ¯”** â†’ `GET /api/v1/evaluations/comparison/{assessmentId}/{userId}`
7. **æŸ¥çœ‹å®Œæ•´è¯¦æƒ…** â†’ `GET /api/v1/evaluations/assessment/{assessmentId}/user/{userId}/complete`

## ç®€åŒ–è¯„åˆ†æ¨¡å¼ç‰¹ç‚¹

### ğŸ¯ æ ¸å¿ƒç†å¿µ
è€æ¿è¯„åˆ†é‡‡ç”¨**é«˜çº§ç®¡ç†è§†è§’**ï¼Œæ³¨é‡æ•´ä½“è¡¨ç°è¯„ä¼°ï¼Œè€Œéç»†èŠ‚é¡¹ç›®è¯„åˆ†ï¼š

1. **æ—¶é—´æ•ˆç‡**ï¼šè€æ¿æ—¶é—´å®è´µï¼Œæ— éœ€é€é¡¹è¯¦ç»†è¯„åˆ†
2. **æˆ˜ç•¥é«˜åº¦**ï¼šä»å…¬å¸æ•´ä½“è§’åº¦è¯„ä¼°å‘˜å·¥è´¡çŒ®  
3. **ç®€åŒ–æ“ä½œ**ï¼šåªéœ€æ€»åˆ†+è¯„è¯­ï¼Œæ“ä½œç®€å•é«˜æ•ˆ
4. **æƒé‡å¹³è¡¡**ï¼š10%æƒé‡å½±å“æœ€ç»ˆç»“æœï¼Œèµ·åˆ°è°ƒèŠ‚ä½œç”¨

### ğŸ“Š æŠ€æœ¯å®ç°
- **æ¨¡æ¿ç®€åŒ–**ï¼š`categories` è¿”å›ç©ºæ•°ç»„
- **æ ‡è¯†å­—æ®µ**ï¼š`is_boss_simplified: true`
- **æ•°æ®ç»“æ„**ï¼š`detailed_scores` å§‹ç»ˆä¸º `null`
- **æƒé™æ‰©å±•**ï¼šè€æ¿å¯æŸ¥çœ‹ä»»ä½•å‘˜å·¥çš„è¯„åˆ†å¯¹æ¯”

## æ³¨æ„äº‹é¡¹

### âœ… æƒé™å’Œå®‰å…¨
1. **åŒé‡éªŒè¯**ï¼šç³»ç»ŸéªŒè¯è€æ¿è§’è‰² + ä¸¤å±‚åŠ æƒæ¨¡å¼
2. **çŠ¶æ€æ£€æŸ¥**ï¼šåªèƒ½å¯¹ `active` çŠ¶æ€è€ƒæ ¸è¿›è¡Œè¯„åˆ†
3. **ä¾èµ–æ£€æŸ¥**ï¼šè‡ªåŠ¨éªŒè¯å‘˜å·¥è‡ªè¯„å’Œé¢†å¯¼è¯„åˆ†å®ŒæˆçŠ¶æ€
4. **å…¨å±€æƒé™**ï¼šè€æ¿å¯æŸ¥çœ‹ä»»ä½•å‘˜å·¥çš„è¯„åˆ†å¯¹æ¯”å’Œå®Œæ•´è¯¦æƒ…

### âš¡ ä¸šåŠ¡é€»è¾‘
1. **å³æ—¶è®¡ç®—**ï¼šBossè¯„åˆ†æäº¤åç«‹å³è§¦å‘æœ€ç»ˆå¾—åˆ†è®¡ç®—
2. **æƒé‡åº”ç”¨**ï¼šé‡‡ç”¨ä¸¤å±‚åŠ æƒå…¬å¼è‡ªåŠ¨è®¡ç®—æœ€ç»ˆåˆ†æ•°
3. **çŠ¶æ€æ›´æ–°**ï¼šè‡ªåŠ¨æ›´æ–°è€ƒæ ¸å’Œå‚ä¸è€…çŠ¶æ€
4. **æ—¶åŒºå¤„ç†**ï¼šæ‰€æœ‰æ—¶é—´å‡ä¸ºä¸œå…«åŒºï¼ŒAPIè¿”å›æ­£ç¡®æ—¶åŒºè½¬æ¢

### ğŸ”„ æµç¨‹ä¼˜åŒ–
1. **æ— éœ€è¯¦ç»†è¯„åˆ†**ï¼šç›´æ¥æä¾›æ€»åˆ†å’Œè¯„è¯­å³å¯
2. **æ‰¹é‡å¤„ç†**ï¼šå¯å¿«é€Ÿå¤„ç†å¤šä¸ªå‘˜å·¥çš„è¯„åˆ†
3. **ç»“æœé€æ˜**ï¼šå‘˜å·¥å¯æŸ¥çœ‹è€æ¿è¯„åˆ†åŠæƒé‡åˆ†è§£
4. **å†å²è¿½æº¯**ï¼šå®Œæ•´è®°å½•è¯„åˆ†æ—¶é—´çº¿å’Œæ“ä½œå†å²

## é”™è¯¯å¤„ç†

å¸¸è§é”™è¯¯å“åº”ï¼š

- `400 Bad Request`: å‚æ•°é”™è¯¯æˆ–ä¸šåŠ¡è§„åˆ™é”™è¯¯
- `403 Forbidden`: æƒé™ä¸è¶³ï¼Œä¸æ˜¯è¯¥å‘˜å·¥çš„ä¸Šçº§
- `404 Not Found`: è€ƒæ ¸æˆ–ç”¨æˆ·ä¸å­˜åœ¨
- `401 Unauthorized`: æœªç™»å½•æˆ–tokenè¿‡æœŸ

## APIè°ƒç”¨ç¤ºä¾‹

```bash
# 1. è€æ¿ç™»å½•è·å–token
curl -X POST "http://localhost:3010/api/v1/auth/login" \
     -H "Content-Type: application/json" \
     -d '{
       "username": "boss",
       "password": "123456"
     }'

# 2. è·å–å¾…åŠä»»åŠ¡  
curl -X GET "http://localhost:3010/api/v1/evaluations/my-tasks?assessment_id=17" \
     -H "Authorization: Bearer {boss_token}"

# 3. è·å–ç®€åŒ–è¯„åˆ†æ¨¡æ¿
curl -X GET "http://localhost:3010/api/v1/evaluations/template/17/user/7" \
     -H "Authorization: Bearer {boss_token}"

# 4. æäº¤ç®€åŒ–è¯„åˆ†
curl -X POST "http://localhost:3010/api/v1/evaluations/boss" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer {boss_token}" \
     -d '{
       "assessment_id": 17,
       "evaluatee_id": 7,
       "score": 88.5,
       "feedback": "æ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œå·¥ä½œç§¯æä¸»åŠ¨ï¼Œå»ºè®®ç»§ç»­ä¿æŒ"
     }'

# 5. æŸ¥çœ‹è¯„åˆ†å¯¹æ¯”ï¼ˆè€æ¿å…¨å±€æƒé™ï¼‰
curl -X GET "http://localhost:3010/api/v1/evaluations/comparison/17/7" \
     -H "Authorization: Bearer {boss_token}"

# 6. æŸ¥çœ‹å®Œæ•´è¯„ä¼°è¯¦æƒ…
curl -X GET "http://localhost:3010/api/v1/evaluations/assessment/17/user/7/complete?include_details=true&include_comparison=true" \
     -H "Authorization: Bearer {boss_token}"

# 7. æŸ¥çœ‹å‘˜å·¥æœ€ç»ˆç»“æœï¼ˆå‘˜å·¥è§†è§’ï¼‰
curl -X GET "http://localhost:3010/api/v1/evaluations/my-result/17" \
     -H "Authorization: Bearer {employee_token}"
```

## å®Œæ•´æµ‹è¯•æµç¨‹

### åœºæ™¯ï¼šè€æ¿ä¸ºå‘˜å·¥å¼ ä¸‰ï¼ˆID: 7ï¼‰å®Œæˆç»©æ•ˆè¯„åˆ†

```bash
# Step 1: è€æ¿ç™»å½•
BOSS_TOKEN=$(curl -s -X POST "http://localhost:3010/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username": "boss", "password": "123456"}' | \
  jq -r '.data.access_token')

# Step 2: æŸ¥çœ‹å¾…åŠä»»åŠ¡
echo "=== è€æ¿å¾…åŠä»»åŠ¡ ==="
curl -s -X GET "http://localhost:3010/api/v1/evaluations/my-tasks" \
  -H "Authorization: Bearer $BOSS_TOKEN" | jq '.data[]'

# Step 3: è·å–è¯„åˆ†æ¨¡æ¿ï¼ˆéªŒè¯ç®€åŒ–æ¨¡å¼ï¼‰
echo "=== è¯„åˆ†æ¨¡æ¿ï¼ˆç®€åŒ–æ¨¡å¼ï¼‰==="
curl -s -X GET "http://localhost:3010/api/v1/evaluations/template/17/user/7" \
  -H "Authorization: Bearer $BOSS_TOKEN" | \
  jq '.data | {is_boss_simplified, categories, boss_evaluation_note}'

# Step 4: æäº¤è¯„åˆ†
echo "=== æäº¤è€æ¿è¯„åˆ† ==="
curl -s -X POST "http://localhost:3010/api/v1/evaluations/boss" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $BOSS_TOKEN" \
  -d '{
    "assessment_id": 17,
    "evaluatee_id": 7,
    "score": 88.5,
    "feedback": "ä»å…¬å¸æ•´ä½“è§’åº¦æ¥çœ‹ï¼Œè¯¥å‘˜å·¥è¡¨ç°ç¬¦åˆé¢„æœŸï¼Œå…·å¤‡è‰¯å¥½çš„å·¥ä½œæ€åº¦å’Œæ‰§è¡Œèƒ½åŠ›"
  }' | jq '.data | {id, score, feedback, detailed_scores}'

# Step 5: æŸ¥çœ‹æœ€ç»ˆè¯„åˆ†å¯¹æ¯”
echo "=== è¯„åˆ†å¯¹æ¯”ç»“æœ ==="
curl -s -X GET "http://localhost:3010/api/v1/evaluations/comparison/17/7" \
  -H "Authorization: Bearer $BOSS_TOKEN" | \
  jq '.data.evaluation_status | {current_score, score_breakdown, weight_config}'
```

### é¢„æœŸç»“æœéªŒè¯

âœ… **ç®€åŒ–æ¨¡å¼æ ‡è¯†**ï¼š
- `is_boss_simplified: true`
- `categories: []`
- `boss_evaluation_note` åŒ…å«æ“ä½œè¯´æ˜

âœ… **è¯„åˆ†æ•°æ®ç»“æ„**ï¼š
- `boss_evaluation.detailed_scores: null`
- `boss_evaluation.feedback` åŒ…å«æ€»ä½“è¯„è¯­
- æ— è¯¦ç»†é¡¹ç›®è¯„åˆ†æ•°æ®

âœ… **æœ€ç»ˆåˆ†æ•°è®¡ç®—**ï¼š
- ä½¿ç”¨ä¸¤å±‚åŠ æƒå…¬å¼ï¼š`final_score = self Ã— 36% + leader Ã— 54% + boss Ã— 10%`
- `current_score` æ˜¾ç¤ºæ­£ç¡®çš„åŠ æƒç»“æœ
- `score_breakdown` æ˜ç¡®å±•ç¤ºå„éƒ¨åˆ†è´¡çŒ®